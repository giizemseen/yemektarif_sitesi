<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Yemek Tarifleri | Final Projesi</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://kit.fontawesome.com/c20485228a.js" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Ancizar+Serif:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet" />
    <style>
        .favori-aktif { color: red !important; }
        .auth-popup { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; z-index: 1001; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        #popupArkaPlan { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); z-index: 1000; backdrop-filter: blur(5px); }
        #backToTop { position: fixed; bottom: 20px; right: 20px; padding: 12px 18px; font-size: 20px; border-radius: 50%; border: none; background: #e67e22; color: white; cursor: pointer; display: none; z-index: 999; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
    </style>
</head>

<body>
    <section id="menu">
        <div id="logo">Yemekler</div>
        <nav>
            <button id="darkModeBtn">ğŸŒ™ Mod DeÄŸiÅŸtir</button>
            <button id="loginBtn" onclick="formlariGoster('giris')">GiriÅŸ Yap</button>
            <button id="logoutBtn" style="display: none;">Ã‡Ä±kÄ±ÅŸ Yap</button>
            <span id="usernameDisplay"></span>
            <a href="#anasayfa">Anasayfa</a>
            <a href="#ana-yemekler">Ana Yemekler</a>
            <a href="#tatlilar">TatlÄ±lar</a>
            <a href="#kahvaltiliklar">KahvaltÄ±lÄ±klar</a>
        </nav>
    </section>

    <div id="popupArkaPlan" style="display: none;"></div>

    <div id="girisFormu" class="auth-popup" style="display: none;">
        <h3>GiriÅŸ Yap</h3>
        <input type="text" id="girisKullanici" placeholder="KullanÄ±cÄ± AdÄ±" style="width:100%; margin-bottom:10px; padding:8px;">
        <input type="password" id="girisSifre" placeholder="Åifre" style="width:100%; margin-bottom:10px; padding:8px;">
        <button onclick="girisYap()" style="width:100%; background:#e67e22; color:white; border:none; padding:10px; border-radius:5px; cursor:pointer;">GiriÅŸ Yap</button>
        <p style="margin-top:10px; text-align:center;">HesabÄ±nÄ±z yok mu? <a href="javascript:void(0)" onclick="formlariGoster('kayit')">KayÄ±t Ol</a></p>
    </div>

    <div id="kayitFormu" class="auth-popup" style="display: none;">
        <h3>KayÄ±t Ol</h3>
        <input type="text" id="kayitKullanici" placeholder="KullanÄ±cÄ± AdÄ±" style="width:100%; margin-bottom:10px; padding:8px;">
        <input type="password" id="kayitSifre" placeholder="Åifre" style="width:100%; margin-bottom:10px; padding:8px;">
        <input type="email" id="kayitEmail" placeholder="Gmail adresiniz" style="width:100%; margin-bottom:10px; padding:8px;">
        <button onclick="kayitOl()" style="width:100%; background:#e67e22; color:white; border:none; padding:10px; border-radius:5px; cursor:pointer;">KayÄ±t Ol</button>
        <p style="margin-top:10px; text-align:center;">Zaten hesabÄ±nÄ±z var mÄ±? <a href="javascript:void(0)" onclick="formlariGoster('giris')">GiriÅŸ Yap</a></p>
    </div>

    <input type="text" id="searchInput" placeholder="Tarif ara..." style="display:block; margin:20px auto; padding:10px; width:80%; max-width:400px; border-radius:20px; border:1px solid #ccc;" />

    <section id="anasayfa">
        <div id="iÃ§erik">
            <h2>Anasayfa</h2>
            <p>Lezzetin dÃ¼nyasÄ±na hoÅŸ geldiniz! En pratik ve nefis yemek tarifleriyle mutfaÄŸÄ±nÄ±zda harikalar yaratÄ±n. <br />Bu site, <strong>YÃ¶netim BiliÅŸim Sistemleri</strong> Site Web tabanlÄ± uygulama programlama dersi iÃ§in final projesidir.</p>
        </div>
    </section>

    <section id="ana-yemekler">
        <h3>Ana Yemekler</h3>
        <div class="tarif" data-id="lazanya">
            <a href="yemekler/lazanya.html">
                <img src="img/r6.jpg" alt="Lazanya" />
                <div class="tarif-detay"><h4>Lazanya</h4><p>Kat kat lezzet: BeÅŸamel sos ve nefis kÄ±ymalÄ± harÃ§.</p></div>
            </a>
            <i class="fas fa-heart favorite-icon" data-id="lazanya"></i>
        </div>
        <div class="tarif" data-id="karnabahargraten">
            <a href="yemekler/karnabahargraten.html">
                <img src="img/r7.jpg" alt="Karnabahar Graten" />
                <div class="tarif-detay"><h4>Karnabahar Graten</h4><p>FÄ±rÄ±nda beÅŸamel soslu sebze keyfi.</p></div>
            </a>
            <i class="fas fa-heart favorite-icon" data-id="karnabahargraten"></i>
        </div>
        <div class="tarif" data-id="tavuksote">
            <a href="yemekler/Tavuksote.html">
                <img src="img/tavuksote.jpg" alt="Tavuk Sote" />
                <div class="tarif-detay"><h4>Tavuk Sote</h4><p>Renkli biberlerle nefis bir akÅŸam yemeÄŸi.</p></div>
            </a>
            <i class="fas fa-heart favorite-icon" data-id="tavuksote"></i>
        </div>
    </section>

    <section id="tatlilar">
        <h3>TatlÄ±lar</h3>
        <div class="tarif" data-id="sÃ¼tlac">
            <a href="yemekler/sÃ¼tlac.html">
                <img src="img/firinsÃ¼tlaÃ§.jpg" alt="sÃ¼tlac" />
                <div class="tarif-detay"><h4>SÃ¼tlaÃ§</h4><p>FÄ±rÄ±nda nar gibi kÄ±zaran klasik lezzet.</p></div>
            </a>
            <i class="fas fa-heart favorite-icon" data-id="sÃ¼tlac"></i>
        </div>
        <div class="tarif" data-id="magnolia">
            <a href="yemekler/magnolia.html">
                <img src="img/r1.jpg.avif" alt="Magnolia" />
                <div class="tarif-detay"><h4>Magnolia</h4><p>BiskÃ¼vi ve meyve uyumuyla pratik tatlÄ±.</p></div>
            </a>
            <i class="fas fa-heart favorite-icon" data-id="magnolia"></i>
        </div>
    </section>

    <section id="kahvaltiliklar">
        <h3>KahvaltÄ±lÄ±klar</h3>
        <div class="tarif" data-id="menemen">
            <a href="yemekler/menemen.html">
                <img src="img/rmelemn.webp" alt="Menemen" />
                <div class="tarif-detay"><h4>Menemen</h4><p>Geleneksel kahvaltÄ±lÄ±k.</p></div>
            </a>
            <i class="fas fa-heart favorite-icon" data-id="menemen"></i>
        </div>
        <div class="tarif" data-id="pancake">
            <a href="yemekler/pancake.html">
                <img src="img/r10.jpg" alt="Pancake" />
                <div class="tarif-detay"><h4>Pancake</h4><p>YumuÅŸacÄ±k pankekler sabahlarÄ±nÄ±za neÅŸe katacak.</p></div>
            </a>
            <i class="fas fa-heart favorite-icon" data-id="pancake"></i>
        </div>
    </section>

    <aside id="favorilerPaneli">
        <h3>Favori Tarifler</h3>
        <ul id="favoriListe"></ul>
    </aside>

    <section id="kullaniciTarifleri">
        <h3>Sizden Gelen Tarifler</h3>
        <div id="tarifListesi"></div>
        <form id="tarifForm" style="background:#f9f9f9; padding:20px; border-radius:10px; margin-top:20px;">
            <input type="text" id="formYemekAdi" placeholder="Yemek AdÄ±" required style="width:100%; margin-bottom:10px; padding:8px;" />
            <textarea id="formMesaj" placeholder="Tarifinizi buraya yazÄ±n..." required style="width:100%; height:100px; padding:8px;"></textarea>
            <button type="submit" style="background:#27ae60; color:white; border:none; padding:10px 20px; border-radius:5px; cursor:pointer;">Tarifi GÃ¶nder</button>
        </form>
    </section>

    <button id="backToTop" title="YukarÄ± Ã‡Ä±k">&#8679;</button>

    <script>
        const loginBtn = document.getElementById("loginBtn");
        const logoutBtn = document.getElementById("logoutBtn");
        const usernameDisplay = document.getElementById("usernameDisplay");
        const backToTop = document.getElementById("backToTop");

        function checkLogin() {
            const username = localStorage.getItem("username");
            if (username) {
                loginBtn.style.display = "none";
                logoutBtn.style.display = "inline";
                usernameDisplay.textContent = `Merhaba, ${username}`;
            } else {
                loginBtn.style.display = "inline";
                logoutBtn.style.display = "none";
                usernameDisplay.textContent = "";
            }
        }

        function formlariGoster(tip) {
            document.getElementById("popupArkaPlan").style.display = "block";
            document.getElementById("girisFormu").style.display = tip === "giris" ? "block" : "none";
            document.getElementById("kayitFormu").style.display = tip === "kayit" ? "block" : "none";
        }

        document.getElementById("popupArkaPlan").addEventListener("click", () => {
            document.getElementById("popupArkaPlan").style.display = "none";
            document.getElementById("girisFormu").style.display = "none";
            document.getElementById("kayitFormu").style.display = "none";
        });

        function kayitOl() {
            const kullanici = document.getElementById("kayitKullanici").value.trim();
            const sifre = document.getElementById("kayitSifre").value;
            const email = document.getElementById("kayitEmail").value.trim();
            if (!kullanici || !sifre || !email.endsWith("@gmail.com")) return alert("HatalÄ± giriÅŸ! @gmail.com zorunludur.");
            const kullanicilar = JSON.parse(localStorage.getItem("kullanicilar") || "{}");
            kullanicilar[kullanici] = { sifre, email };
            localStorage.setItem("kullanicilar", JSON.stringify(kullanicilar));
            alert("KayÄ±t BaÅŸarÄ±lÄ±!");
            formlariGoster('giris');
        }

        function girisYap() {
            const kullanici = document.getElementById("girisKullanici").value;
            const sifre = document.getElementById("girisSifre").value;
            const kullanicilar = JSON.parse(localStorage.getItem("kullanicilar") || "{}");
            if (kullanicilar[kullanici] && kullanicilar[kullanici].sifre === sifre) {
                localStorage.setItem("username", kullanici);
                location.reload();
            } else alert("Hata!");
        }

        logoutBtn.addEventListener("click", () => {
            localStorage.removeItem("username");
            localStorage.removeItem("favorites");
            location.reload();
        });

        function favorileriYonet() {
            const panel = document.getElementById("favoriListe");
            panel.innerHTML = "";
            const favoriler = JSON.parse(localStorage.getItem("favorites") || "[]");
            favoriler.forEach(fav => {
                const li = document.createElement("li");
                li.innerHTML = `${fav.baslik} <button onclick="favoriSil('${fav.id}')">Ã—</button>`;
                panel.appendChild(li);
            });
            document.querySelectorAll(".favorite-icon").forEach(icon => {
                const isFav = favoriler.find(f => f.id === icon.dataset.id);
                icon.classList.toggle("favori-aktif", !!isFav);
            });
        }

        function favoriEkleSil(id, baslik) {
            if (!localStorage.getItem("username")) return alert("GiriÅŸ yapÄ±n!");
            let favs = JSON.parse(localStorage.getItem("favorites") || "[]");
            const index = favs.findIndex(f => f.id === id);
            if (index > -1) favs.splice(index, 1);
            else favs.push({ id, baslik });
            localStorage.setItem("favorites", JSON.stringify(favs));
            favorileriYonet();
        }

        function favoriSil(id) {
            let favs = JSON.parse(localStorage.getItem("favorites") || "[]");
            favs = favs.filter(f => f.id !== id);
            localStorage.setItem("favorites", JSON.stringify(favs));
            favorileriYonet();
        }

        function tarifleriGoster() {
            const liste = document.getElementById("tarifListesi");
            liste.innerHTML = "";
            const tarifler = JSON.parse(localStorage.getItem("kullaniciTarifleri") || "[]");
            tarifler.forEach((t, i) => {
                const div = document.createElement("div");
                div.innerHTML = `<h4>${t.yemekadi}</h4><p>${t.mesaj}</p><button onclick="tarifSil(${i})">Sil</button>`;
                liste.appendChild(div);
            });
        }

        function tarifSil(i) {
            let t = JSON.parse(localStorage.getItem("kullaniciTarifleri"));
            t.splice(i, 1);
            localStorage.setItem("kullaniciTarifleri", JSON.stringify(t));
            tarifleriGoster();
        }

        document.addEventListener("DOMContentLoaded", () => {
            checkLogin();
            favorileriYonet();
            tarifleriGoster();
            document.querySelectorAll(".favorite-icon").forEach(icon => {
                icon.addEventListener("click", () => {
                    const baslik = icon.closest(".tarif").querySelector("h4").textContent;
                    favoriEkleSil(icon.dataset.id, baslik);
                });
            });
            document.getElementById("tarifForm").addEventListener("submit", (e) => {
                e.preventDefault();
                const yeni = { yemekadi: document.getElementById("formYemekAdi").value, mesaj: document.getElementById("formMesaj").value };
                let t = JSON.parse(localStorage.getItem("kullaniciTarifleri") || "[]");
                t.push(yeni);
                localStorage.setItem("kullaniciTarifleri", JSON.stringify(t));
                e.target.reset();
                tarifleriGoster();
            });
            document.getElementById("darkModeBtn").addEventListener("click", () => {
                document.body.classList.toggle("dark-mode");
            });
            document.getElementById("searchInput").addEventListener("input", (e) => {
                const k = e.target.value.toLowerCase();
                document.querySelectorAll(".tarif").forEach(t => {
                    t.style.display = t.textContent.toLowerCase().includes(k) ? "block" : "none";
                });
            });
            window.addEventListener("scroll", () => {
                if (window.scrollY > 300) backToTop.style.display = "block";
                else backToTop.style.display = "none";
            });
            backToTop.addEventListener("click", () => {
                window.scrollTo({ top: 0, behavior: "smooth" });
            });
        });
    </script>
</body>
</html>
